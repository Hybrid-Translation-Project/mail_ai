{% extends "base.html" %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>ğŸ“‚ GÃ¶nderilen & Ä°ptal Edilenler</h2>
    <p style="color: #666; font-size: 0.9rem;">Son 50 iÅŸlem listeleniyor.</p>
</div>

<div class="table-responsive" style="background: #1a1a1a; border-radius: 8px; border: 1px solid #333;">
    <table style="width: 100%; border-collapse: collapse;">
        <thead style="background: #252525; border-bottom: 1px solid #333;">
            <tr>
                <th style="padding: 15px; text-align: left;">Tarih</th>
                <th style="padding: 15px; text-align: left;">Kime / Muhatap</th>
                <th style="padding: 15px; text-align: left;">Konu</th>
                <th style="padding: 15px; text-align: center;">Durum</th>
                <th style="padding: 15px; text-align: center;">Ä°ÅŸlem</th>
            </tr>
        </thead>
        <tbody>
            {% for mail in mails %}
            <tr style="border-bottom: 1px solid #222;">
                <td style="padding: 15px; color: #888; font-size: 0.9rem;">{{ mail.created_at.strftime('%d.%m %H:%M') }}</td>
                <td style="padding: 15px; font-weight: 500;">{{ mail.from }}</td>
                <td style="padding: 15px;">{{ mail.subject }}</td>
                <td style="padding: 15px; text-align: center;">
                    {% if mail.status == 'SENT' %}
                        <span style="background: rgba(40, 167, 69, 0.2); color: #28a745; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold;">GÃ–NDERÄ°LDÄ°</span>
                    {% else %}
                        <span style="background: rgba(220, 53, 69, 0.2); color: #dc3545; padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold;">Ä°PTAL EDÄ°LDÄ°</span>
                    {% endif %}
                </td>
                <td style="padding: 15px; text-align: center;">
                    <form action="/ui/mail/delete/{{ mail._id }}" method="post" style="display:inline;" onsubmit="return confirm('Bu kaydÄ± arÅŸivden tamamen silmek istediÄŸine emin misin?');">
                        <button type="submit" style="background: none; border: none; color: #cf6679; cursor: pointer; font-size: 1rem;" title="ArÅŸivden KaldÄ±r">
                            ğŸ—‘ï¸
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if not mails %}
<div style="text-align: center; padding: 50px; color: #666;">
    <p>HenÃ¼z iÅŸlem geÃ§miÅŸi bulunmuyor.</p>
</div>
{% endif %}
{% endblock %}